@echo off
setlocal enabledelayedexpansion

REM Define the path to the file
set "FILE=./tdm/ReSpawnWithoutMigrate.bat"

REM Get the name of the repository
for /f "tokens=*" %%I in ('git rev-parse --show-toplevel') do (
    set "REPO_PATH=%%I"
)
for %%A in ("%REPO_PATH%") do (
    set "REPO_NAME=%%~nxA"
)

REM Update the content of the file
(for /f "delims=" %%L in (!FILE!) do (
    set "LINE=%%L"
    set "LINE=!LINE:[REPO_NAME]=%REPO_NAME%!"
    echo !LINE!
)) > temp.txt
move /y temp.txt !FILE! >nul
